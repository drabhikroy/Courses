<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Pivoting and Measuring Confidence</title>
    <meta charset="utf-8" />
    <meta name="author" content="Week 8" />
    <script src="Slides-Week-8R_files/header-attrs-2.17/header-attrs.js"></script>
    <link href="Slides-Week-8R_files/tile-view-0.2.6/tile-view.css" rel="stylesheet" />
    <script src="Slides-Week-8R_files/tile-view-0.2.6/tile-view.js"></script>
    <link href="Slides-Week-8R_files/animate.css-3.7.2/animate.xaringan.css" rel="stylesheet" />
    <link href="Slides-Week-8R_files/tachyons-4.12.0/tachyons.min.css" rel="stylesheet" />
    <script src="Slides-Week-8R_files/kePrint-0.0.1/kePrint.js"></script>
    <link href="Slides-Week-8R_files/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Pivoting and Measuring Confidence
]
.author[
### Week 8
]

---




<div>
<style type="text/css">.xaringan-extra-logo {
width: 110px;
height: 128px;
z-index: 0;
background-image: url(/Users/skynet/Documents/WVU/Teaching/GitHub.nosync/edp613/static/img/course_hex_alpha.png);
background-size: contain;
background-repeat: no-repeat;
position: absolute;
top:1em;right:1em;
}
</style>
<script>(function () {
  let tries = 0
  function addLogo () {
    if (typeof slideshow === 'undefined') {
      tries += 1
      if (tries < 10) {
        setTimeout(addLogo, 100)
      }
    } else {
      document.querySelectorAll('.remark-slide-content:not(.title-slide):not(.inverse):not(.hide_logo)')
        .forEach(function (slide) {
          const logo = document.createElement('a')
          logo.classList = 'xaringan-extra-logo'
          logo.href = 'https://edp613.asocialdatascientist.com'
          slide.appendChild(logo)
        })
    }
  }
  document.addEventListener('DOMContentLoaded', addLogo)
})()</script>
</div>

# Packages needed and a Note about Icons

Please load up the following packages. Remember to first install the ones you don't have.

```r
library(tidyverse)
library(mosaic)
library(ggplot2movies)
```

You may come across the following icons. The table below lists what each means.


&lt;table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:center;background-color: transparent !important;"&gt; Icon &lt;/th&gt;
   &lt;th style="text-align:left;background-color: transparent !important;"&gt; Description &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;width: 10em; background-color: #transparent !important;"&gt; &lt;svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:
#4682b4;overflow:visible;position:relative;"&gt;&lt;path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;/td&gt;
   &lt;td style="text-align:left;width: 40em; background-color: #transparent !important;"&gt; Indicates that an example continues on the following slide. &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;width: 10em; background-color: #transparent !important;"&gt; &lt;svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#ff6347;overflow:visible;position:relative;"&gt;&lt;path d="M384 128v255.1c0 35.35-28.65 64-64 64H64c-35.35 0-64-28.65-64-64V128c0-35.35 28.65-64 64-64H320C355.3 64 384 92.65 384 128z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;/td&gt;
   &lt;td style="text-align:left;width: 40em; background-color: #transparent !important;"&gt; Indicates that a section using common syntax has ended. &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;width: 10em; background-color: #transparent !important;"&gt; &lt;svg aria-hidden="true" role="img" viewbox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5cb85c;overflow:visible;position:relative;"&gt;&lt;path d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;/td&gt;
   &lt;td style="text-align:left;width: 40em; background-color: #transparent !important;"&gt; Indicates that there is an active hyperlink on the slide. &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:center;width: 10em; background-color: #transparent !important;"&gt; &lt;svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#faffbd;overflow:visible;position:relative;"&gt;&lt;path d="M384 48V512l-192-112L0 512V48C0 21.5 21.5 0 48 0h288C362.5 0 384 21.5 384 48z"&gt;&lt;/path&gt;&lt;/svg&gt; &lt;/td&gt;
   &lt;td style="text-align:left;width: 40em; background-color: #transparent !important;"&gt; Indicates that a section covering a concept has ended. &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# What is a confidence interval?

A *confidence interval* (CI) gives a range of possible values for a parameter.  It depends on a specified _confidence level_ with 

--

- higher confidence levels corresponding to wider confidence intervals

--

- lower confidence levels corresponding to narrower confidence intervals.  

--

The most common confidence levels include 90%, 95%, and 99%.

---

# Problems with how confidence intervals are taught

You were just taught about the confidence interval in an bad way! 

--

- Finding confidence intervals for some mean is to first assume a normal curve for a population and then magic

--

- But assuming normality is a BIG assumption!

---

# Bootstrapping

--

Hypothesis testing

&gt;- We simply want to if our `\(H_0\)` or `\(H_1\)` is correct.

--

&gt;- First step in being able to generalize

--

&lt;br&gt;
Typically we have a sample of a population’s data so we can

1. take repeated samples from a sample data of size whatever

--

2. calculate the mean for each of these samples

--

3. created a new distribution of these means

--

4. estimate the population distribution 

&lt;center&gt;
aka &lt;i&gt;bootstrapping&lt;/i&gt;
&lt;/center&gt;

--

&lt;ol start=5&gt;
&lt;li&gt;calculate the confidence interval (CI)  
&lt;/ol&gt;

---

# ggplot2movies

We'll look at CIs, but first let's look at the `ggplot2movies` data set...


```r
head(movies)
```

```
## # A tibble: 6 × 24
##   title      year length budget rating votes    r1    r2    r3    r4    r5    r6
##   &lt;chr&gt;     &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 $          1971    121     NA    6.4   348   4.5   4.5   4.5   4.5  14.5  24.5
## 2 $1000 a …  1939     71     NA    6      20   0    14.5   4.5  24.5  14.5  14.5
## 3 $21 a Da…  1941      7     NA    8.2     5   0     0     0     0     0    24.5
## 4 $40,000    1996     70     NA    8.2     6  14.5   0     0     0     0     0  
## 5 $50,000 …  1975     71     NA    3.4    17  24.5   4.5   0    14.5  14.5   4.5
## 6 $pent      2000     91     NA    4.3    45   4.5   4.5   4.5  14.5  14.5  14.5
## # … with 12 more variables: r7 &lt;dbl&gt;, r8 &lt;dbl&gt;, r9 &lt;dbl&gt;, r10 &lt;dbl&gt;,
## #   mpaa &lt;chr&gt;, Action &lt;int&gt;, Animation &lt;int&gt;, Comedy &lt;int&gt;, Drama &lt;int&gt;,
## #   Documentary &lt;int&gt;, Romance &lt;int&gt;, Short &lt;int&gt;
```

---

...its size...


```r
dim(movies)
```

```
## [1] 58788    24
```

That's 58,788 rows by 24 columns!

---

... and the names of its columns.


```r
names(movies)
```

```
##  [1] "title"       "year"        "length"      "budget"      "rating"     
##  [6] "votes"       "r1"          "r2"          "r3"          "r4"         
## [11] "r5"          "r6"          "r7"          "r8"          "r9"         
## [16] "r10"         "mpaa"        "Action"      "Animation"   "Comedy"     
## [21] "Drama"       "Documentary" "Romance"     "Short"
```

You can see more about the functionality by looking at its [documentation](https://cran.r-project.org/web/packages/ggplot2movies/ggplot2movies.pdf). For now, here's what the variables mean:

- **title**. Title of the movie.
- **year**. Year of release.
- **budget**. Total budget (if known) in US dollars
- **length**. Length in minutes.
- **rating**. Average IMDB user rating.
- **votes**. Number of IMDB users who rated this movie.
- **r1-10**. Multiplying by ten gives percentile (to nearest 10%) of users who rated this movie a 1.
- **mpaa**. [MPAA rating](https://www.motionpictures.org/film-ratings/).
- **Action**, **Animation**, **Comedy**, **Drama**, **Documentary**, **Romance**, **Short**. Binary variables representing if movie was classified as belonging to that genre.

.right[<svg aria-hidden="true" role="img" viewBox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5cb85c;overflow:visible;position:relative;"><path d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>]

---

# Descriptives 

Let's take a look at a bar chart of the genres. But wait, those are in a bunch of columns and R likes its data in long form! To get the data set to this form, let's first select the columns we need and then use a command called `pivot_longer` which emulates a pivot table in Excel. 


count: false
 

.panel1-sw1-auto[

```r
*ggplot2movies::movies
```
]
 
.panel2-sw1-auto[

```
## # A tibble: 58,788 × 24
##    title     year length budget rating votes    r1    r2    r3    r4    r5    r6
##    &lt;chr&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 $         1971    121     NA    6.4   348   4.5   4.5   4.5   4.5  14.5  24.5
##  2 $1000 a…  1939     71     NA    6      20   0    14.5   4.5  24.5  14.5  14.5
##  3 $21 a D…  1941      7     NA    8.2     5   0     0     0     0     0    24.5
##  4 $40,000   1996     70     NA    8.2     6  14.5   0     0     0     0     0  
##  5 $50,000…  1975     71     NA    3.4    17  24.5   4.5   0    14.5  14.5   4.5
##  6 $pent     2000     91     NA    4.3    45   4.5   4.5   4.5  14.5  14.5  14.5
##  7 $windle   2002     93     NA    5.3   200   4.5   0     4.5   4.5  24.5  24.5
##  8 '15'      2002     25     NA    6.7    24   4.5   4.5   4.5   4.5   4.5  14.5
##  9 '38       1987     97     NA    6.6    18   4.5   4.5   4.5   0     0     0  
## 10 '49-'17   1917     61     NA    6      51   4.5   0     4.5   4.5   4.5  44.5
## # … with 58,778 more rows, and 12 more variables: r7 &lt;dbl&gt;, r8 &lt;dbl&gt;, r9 &lt;dbl&gt;,
## #   r10 &lt;dbl&gt;, mpaa &lt;chr&gt;, Action &lt;int&gt;, Animation &lt;int&gt;, Comedy &lt;int&gt;,
## #   Drama &lt;int&gt;, Documentary &lt;int&gt;, Romance &lt;int&gt;, Short &lt;int&gt;
```
]

---
count: false
 

.panel1-sw1-auto[

```r
ggplot2movies::movies %&gt;%
* select(Action, Animation, Comedy,
*        Drama, Documentary, Romance,
*        Short)
```
]
 
.panel2-sw1-auto[

```
## # A tibble: 58,788 × 7
##    Action Animation Comedy Drama Documentary Romance Short
##     &lt;int&gt;     &lt;int&gt;  &lt;int&gt; &lt;int&gt;       &lt;int&gt;   &lt;int&gt; &lt;int&gt;
##  1      0         0      1     1           0       0     0
##  2      0         0      1     0           0       0     0
##  3      0         1      0     0           0       0     1
##  4      0         0      1     0           0       0     0
##  5      0         0      0     0           0       0     0
##  6      0         0      0     1           0       0     0
##  7      1         0      0     1           0       0     0
##  8      0         0      0     0           1       0     1
##  9      0         0      0     1           0       0     0
## 10      0         0      0     0           0       0     0
## # … with 58,778 more rows
```
]

---
count: false
 

.panel1-sw1-auto[

```r
ggplot2movies::movies %&gt;%
  select(Action, Animation, Comedy,
         Drama, Documentary, Romance,
         Short) %&gt;%
* pivot_longer(
*   everything(),
*   names_to = "genre"
* )
```
]
 
.panel2-sw1-auto[

```
## # A tibble: 411,516 × 2
##    genre       value
##    &lt;chr&gt;       &lt;int&gt;
##  1 Action          0
##  2 Animation       0
##  3 Comedy          1
##  4 Drama           1
##  5 Documentary     0
##  6 Romance         0
##  7 Short           0
##  8 Action          0
##  9 Animation       0
## 10 Comedy          1
## # … with 411,506 more rows
```
]

&lt;style&gt;
.panel1-sw1-auto {
  color: white;
  width: 41.65%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-sw1-auto {
  color: white;
  width: 56.35%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-sw1-auto {
  color: white;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;



.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---



In instances where we have to go from a 

- &lt;span style="color:#b85cb8"&gt;long&lt;/span&gt; to &lt;span style="color:#5cb85c"&gt;wide&lt;/span&gt; data set, we'd use a command called `pivot_wider`

- &lt;span style="color:#5cb85c"&gt;wide&lt;/span&gt; to &lt;span style="color:#b85cb8"&gt;long&lt;/span&gt; data set, we use a command called `pivot_longer`

.footnote[For more information, take a look at this fantastic overview courtesy of [R-Ladies Sydney](https://rladiessydney.org/courses/ryouwithme/02-cleanitup-4/). For an advanced walkthrough, the [Data Wrangling](https://dcl-wrangle.stanford.edu/pivot_basic.html) site over at Stanford is a great resource.] 
.right[<svg aria-hidden="true" role="img" viewBox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5cb85c;overflow:visible;position:relative;"><path d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>]

---

# pivot_longer

It is pretty rare that at this stage in your academic development that you need to go from long to wide so we'll be concentrating on the converse with `pivot_longer`. 

.footnote[The original graphics here were created by RStudio's [Allison Hill](https://alison.rbind.io/). I have amended them for aesthetic purposes]

OK let's begin!

.right[<svg aria-hidden="true" role="img" viewBox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5cb85c;overflow:visible;position:relative;"><path d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>] 
.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

# An overview of `pivot_longer` 

We'll concentrate one two options in `pivot_longer`: `names_to` and `values_to`. 

&lt;img src="img/pl2.png" width="55%" height="55%" style="display: block; margin: auto;" /&gt;

Remember you can always run `?` in front of any command in the Console to get more information about it. For `pivot_longer`, we would simply type in


```r
?pivot_longer
```

to see other options. 
.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

If you want to follow along with the fake data set we'll be using, run the following command to build the tibble


```r
juniors_multiple &lt;- 
  tribble(
  ~ "baker", ~"cinnamon_1", ~"cardamom_2", ~"nutmeg_3",
  "Emma", 1L,   0L, 1L,
  "Harry", 1L,   1L, 1L, 
  "Ruby", 1L,   0L, 1L, 
  "Zainab", 0L, NA, 0L
)
```

and check it just to make sure


```r
juniors_multiple
```

```
## # A tibble: 4 × 4
##   baker  cinnamon_1 cardamom_2 nutmeg_3
##   &lt;chr&gt;       &lt;int&gt;      &lt;int&gt;    &lt;int&gt;
## 1 Emma            1          0        1
## 2 Harry           1          1        1
## 3 Ruby            1          0        1
## 4 Zainab          0         NA        0
```

Looks good! Let's convert this!
.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

To remind you of what the `juniors_multiple` data frame looks like, we have

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: #212121 !important;"&gt; baker &lt;/th&gt;
   &lt;th style="text-align:right;background-color: #212121 !important;"&gt; cinnamon_1 &lt;/th&gt;
   &lt;th style="text-align:right;background-color: #212121 !important;"&gt; cardamom_2 &lt;/th&gt;
   &lt;th style="text-align:right;background-color: #212121 !important;"&gt; nutmeg_3 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Emma &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: #212121 !important;"&gt; Harry &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Ruby &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: #212121 !important;"&gt; Zainab &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

We can assign names to the eventual columns using `names_to` and `values_to`.

&lt;img src="img/pl3.png" width="55%" height="55%" style="display: block; margin: auto;" /&gt;
.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: #212121 !important;"&gt; baker &lt;/th&gt;
   &lt;th style="text-align:right;background-color: #212121 !important;"&gt; cinnamon_1 &lt;/th&gt;
   &lt;th style="text-align:right;background-color: #212121 !important;"&gt; cardamom_2 &lt;/th&gt;
   &lt;th style="text-align:right;background-color: #212121 !important;"&gt; nutmeg_3 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Emma &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: #212121 !important;"&gt; Harry &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Ruby &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: #212121 !important;"&gt; Zainab &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

We can assign names to the eventual columns using `names_to` and `values_to`.

&lt;img src="img/pl4.png" width="55%" height="55%" style="display: block; margin: auto;" /&gt;
.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;background-color: #212121 !important;"&gt; baker &lt;/th&gt;
   &lt;th style="text-align:right;background-color: #212121 !important;"&gt; cinnamon_1 &lt;/th&gt;
   &lt;th style="text-align:right;background-color: #212121 !important;"&gt; cardamom_2 &lt;/th&gt;
   &lt;th style="text-align:right;background-color: #212121 !important;"&gt; nutmeg_3 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Emma &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: #212121 !important;"&gt; Harry &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Ruby &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;background-color: #212121 !important;"&gt; Zainab &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;background-color: #212121 !important;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

Here you can see the first column `cinnamon_1` and its value `1` associated with the first row `Emma` becomes our first two values under the two columns `spice` and `correct` for our pivoted data frame.

&lt;img src="img/pl5.png" width="55%" height="55%" style="display: block; margin: auto;" /&gt;
.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

This pattern continues until a whole row is used up.

&lt;img src="img/pl6.png" width="75%" height="75%" style="display: block; margin: auto;" /&gt;

.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

Then it repeats for the next row of values...

&lt;img src="img/pl7.png" width="30%" height="30%" style="display: block; margin: auto;" /&gt;

&lt;img src="img/pl8.png" width="30%" height="30%" style="display: block; margin: auto;" /&gt;

&lt;img src="img/pl9.png" width="30%" height="30%" style="display: block; margin: auto;" /&gt;
.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

...and so forth...

&lt;img src="img/pl10.png" width="30%" height="30%" style="display: block; margin: auto;" /&gt;

&lt;img src="img/pl11.png" width="30%" height="30%" style="display: block; margin: auto;" /&gt;

&lt;img src="img/pl12.png" width="30%" height="30%" style="display: block; margin: auto;" /&gt;
.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

...until we run out of rows...

&lt;img src="img/pl13.png" width="30%" height="30%" style="display: block; margin: auto;" /&gt;

&lt;img src="img/pl14.png" width="30%" height="30%" style="display: block; margin: auto;" /&gt;

&lt;img src="img/pl15.png" width="30%" height="30%" style="display: block; margin: auto;" /&gt;
.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

...and get the final table of pivoted values.

&lt;img src="img/pl16.png" width="75%" height="75%" style="display: block; margin: auto;" /&gt;

.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

We can even amend the current command to include things like `order`!

&lt;img src="img/pl17.png" width="75%" height="75%" style="display: block; margin: auto;" /&gt;

.right[<svg aria-hidden="true" role="img" viewBox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#ff6347;overflow:visible;position:relative;"><path d="M384 128v255.1c0 35.35-28.65 64-64 64H64c-35.35 0-64-28.65-64-64V128c0-35.35 28.65-64 64-64H320C355.3 64 384 92.65 384 128z"/></svg>]

---

# Shortcut

Rather than accounting for every column, you can just tell R not to account for columns

```r
juniors_multiple %&gt;%
  pivot_longer(-baker,
                names_to = c('spice', 'order'),
                names_sep = '_',
                values_to = 'correct')
```

```
## # A tibble: 12 × 4
##    baker  spice    order correct
##    &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;   &lt;int&gt;
##  1 Emma   cinnamon 1           1
##  2 Emma   cardamom 2           0
##  3 Emma   nutmeg   3           1
##  4 Harry  cinnamon 1           1
##  5 Harry  cardamom 2           1
##  6 Harry  nutmeg   3           1
##  7 Ruby   cinnamon 1           1
##  8 Ruby   cardamom 2           0
##  9 Ruby   nutmeg   3           1
## 10 Zainab cinnamon 1           0
## 11 Zainab cardamom 2          NA
## 12 Zainab nutmeg   3           0
```

---

# Single column types

`pivot_wider` is great for columns of the same type. For example, if we run 


```r
glimpse(juniors_multiple)
```

```
## Rows: 4
## Columns: 4
## $ baker      &lt;chr&gt; "Emma", "Harry", "Ruby", "Zainab"
## $ cinnamon_1 &lt;int&gt; 1, 1, 1, 0
## $ cardamom_2 &lt;int&gt; 0, 1, 0, NA
## $ nutmeg_3   &lt;int&gt; 1, 1, 1, 0
```

all we have are integers... 

---

# Multiple column types

... but for the following


```r
juniors_multiple_full &lt;- 
  tribble(
  ~ "baker", ~"score_1", ~"score_2", ~"score_3", 
  ~ "guess_1", ~"guess_2", ~"guess_3",
    "Emma", 1L, 0L, 1L, "cinnamon", "cloves", "nutmeg",
    "Harry", 1L,  1L, 1L, "cinnamon", "cardamom", "nutmeg",
    "Ruby", 1L, 0L, 1L, "cinnamon", "cumin", "nutmeg",
    "Zainab", 0L, NA, 0L, "cardamom", NA_character_, "cinnamon"
  )
```


```r
juniors_multiple_full
```

```
## # A tibble: 4 × 7
##   baker  score_1 score_2 score_3 guess_1  guess_2  guess_3 
##   &lt;chr&gt;    &lt;int&gt;   &lt;int&gt;   &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   
## 1 Emma         1       0       1 cinnamon cloves   nutmeg  
## 2 Harry        1       1       1 cinnamon cardamom nutmeg  
## 3 Ruby         1       0       1 cinnamon cumin    nutmeg  
## 4 Zainab       0      NA       0 cardamom &lt;NA&gt;     cinnamon
```

.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]
---


```r
glimpse(juniors_multiple_full)
```

```
## Rows: 4
## Columns: 7
## $ baker   &lt;chr&gt; "Emma", "Harry", "Ruby", "Zainab"
## $ score_1 &lt;int&gt; 1, 1, 1, 0
## $ score_2 &lt;int&gt; 0, 1, 0, NA
## $ score_3 &lt;int&gt; 1, 1, 1, 0
## $ guess_1 &lt;chr&gt; "cinnamon", "cinnamon", "cinnamon", "cardamom"
## $ guess_2 &lt;chr&gt; "cloves", "cardamom", "cumin", NA
## $ guess_3 &lt;chr&gt; "nutmeg", "nutmeg", "nutmeg", "cinnamon"
```

...we have both character and numeric vectors.

---

Try running the following


```r
juniors_multiple_full %&gt;% 
  pivot_longer(score_1:guess_3,
               names_to = c('score', 'guess'),
               names_sep = "_",
               values_to = 'correct')
```

Do you get `Error: Can't combine score_1 &lt;integer&gt; and guess_1 &lt;character&gt;.`? So what can you do?

Well since computers are stupid, you have to tell R what to look for.

---

# Generalizing

We can actually just tell R to treat all values the same.


count: false
 

.panel1-sw2-auto[

```r
*juniors_multiple_full
```
]
 
.panel2-sw2-auto[

```
## # A tibble: 4 × 7
##   baker  score_1 score_2 score_3 guess_1  guess_2  guess_3 
##   &lt;chr&gt;    &lt;int&gt;   &lt;int&gt;   &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;   
## 1 Emma         1       0       1 cinnamon cloves   nutmeg  
## 2 Harry        1       1       1 cinnamon cardamom nutmeg  
## 3 Ruby         1       0       1 cinnamon cumin    nutmeg  
## 4 Zainab       0      NA       0 cardamom &lt;NA&gt;     cinnamon
```
]

---
count: false
 

.panel1-sw2-auto[

```r
juniors_multiple_full %&gt;%
# Don't do anything with the baker column
*   pivot_longer(-baker,
# Treat all columns the same and order them
*                names_to = c(".value", "order"),
# Control how the column names are broken up
*                names_sep = "_")
```
]
 
.panel2-sw2-auto[

```
## # A tibble: 12 × 4
##    baker  order score guess   
##    &lt;chr&gt;  &lt;chr&gt; &lt;int&gt; &lt;chr&gt;   
##  1 Emma   1         1 cinnamon
##  2 Emma   2         0 cloves  
##  3 Emma   3         1 nutmeg  
##  4 Harry  1         1 cinnamon
##  5 Harry  2         1 cardamom
##  6 Harry  3         1 nutmeg  
##  7 Ruby   1         1 cinnamon
##  8 Ruby   2         0 cumin   
##  9 Ruby   3         1 nutmeg  
## 10 Zainab 1         0 cardamom
## 11 Zainab 2        NA &lt;NA&gt;    
## 12 Zainab 3         0 cinnamon
```
]

&lt;style&gt;
.panel1-sw2-auto {
  color: white;
  width: 53.4545454545455%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-sw2-auto {
  color: white;
  width: 44.5454545454545%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-sw2-auto {
  color: white;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;



---

# Back to the bar chart

Now that we know how to pivot, we can just `group_by` genre type and then `tally`


count: false
 

.panel1-sw3-auto[

```r
*ggplot2movies::movies
```
]
 
.panel2-sw3-auto[

```
## # A tibble: 58,788 × 24
##    title     year length budget rating votes    r1    r2    r3    r4    r5    r6
##    &lt;chr&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 $         1971    121     NA    6.4   348   4.5   4.5   4.5   4.5  14.5  24.5
##  2 $1000 a…  1939     71     NA    6      20   0    14.5   4.5  24.5  14.5  14.5
##  3 $21 a D…  1941      7     NA    8.2     5   0     0     0     0     0    24.5
##  4 $40,000   1996     70     NA    8.2     6  14.5   0     0     0     0     0  
##  5 $50,000…  1975     71     NA    3.4    17  24.5   4.5   0    14.5  14.5   4.5
##  6 $pent     2000     91     NA    4.3    45   4.5   4.5   4.5  14.5  14.5  14.5
##  7 $windle   2002     93     NA    5.3   200   4.5   0     4.5   4.5  24.5  24.5
##  8 '15'      2002     25     NA    6.7    24   4.5   4.5   4.5   4.5   4.5  14.5
##  9 '38       1987     97     NA    6.6    18   4.5   4.5   4.5   0     0     0  
## 10 '49-'17   1917     61     NA    6      51   4.5   0     4.5   4.5   4.5  44.5
## # … with 58,778 more rows, and 12 more variables: r7 &lt;dbl&gt;, r8 &lt;dbl&gt;, r9 &lt;dbl&gt;,
## #   r10 &lt;dbl&gt;, mpaa &lt;chr&gt;, Action &lt;int&gt;, Animation &lt;int&gt;, Comedy &lt;int&gt;,
## #   Drama &lt;int&gt;, Documentary &lt;int&gt;, Romance &lt;int&gt;, Short &lt;int&gt;
```
]

---
count: false
 

.panel1-sw3-auto[

```r
ggplot2movies::movies %&gt;%
* select(Action, Animation, Comedy,
*        Drama, Documentary, Romance,
*        Short)
```
]
 
.panel2-sw3-auto[

```
## # A tibble: 58,788 × 7
##    Action Animation Comedy Drama Documentary Romance Short
##     &lt;int&gt;     &lt;int&gt;  &lt;int&gt; &lt;int&gt;       &lt;int&gt;   &lt;int&gt; &lt;int&gt;
##  1      0         0      1     1           0       0     0
##  2      0         0      1     0           0       0     0
##  3      0         1      0     0           0       0     1
##  4      0         0      1     0           0       0     0
##  5      0         0      0     0           0       0     0
##  6      0         0      0     1           0       0     0
##  7      1         0      0     1           0       0     0
##  8      0         0      0     0           1       0     1
##  9      0         0      0     1           0       0     0
## 10      0         0      0     0           0       0     0
## # … with 58,778 more rows
```
]

---
count: false
 

.panel1-sw3-auto[

```r
ggplot2movies::movies %&gt;%
  select(Action, Animation, Comedy,
         Drama, Documentary, Romance,
         Short) %&gt;%
* pivot_longer(everything(),
*              names_to = "genre")
```
]
 
.panel2-sw3-auto[

```
## # A tibble: 411,516 × 2
##    genre       value
##    &lt;chr&gt;       &lt;int&gt;
##  1 Action          0
##  2 Animation       0
##  3 Comedy          1
##  4 Drama           1
##  5 Documentary     0
##  6 Romance         0
##  7 Short           0
##  8 Action          0
##  9 Animation       0
## 10 Comedy          1
## # … with 411,506 more rows
```
]

---
count: false
 

.panel1-sw3-auto[

```r
ggplot2movies::movies %&gt;%
  select(Action, Animation, Comedy,
         Drama, Documentary, Romance,
         Short) %&gt;%
  pivot_longer(everything(),
               names_to = "genre") %&gt;%
* group_by(genre)
```
]
 
.panel2-sw3-auto[

```
## # A tibble: 411,516 × 2
## # Groups:   genre [7]
##    genre       value
##    &lt;chr&gt;       &lt;int&gt;
##  1 Action          0
##  2 Animation       0
##  3 Comedy          1
##  4 Drama           1
##  5 Documentary     0
##  6 Romance         0
##  7 Short           0
##  8 Action          0
##  9 Animation       0
## 10 Comedy          1
## # … with 411,506 more rows
```
]

---
count: false
 

.panel1-sw3-auto[

```r
ggplot2movies::movies %&gt;%
  select(Action, Animation, Comedy,
         Drama, Documentary, Romance,
         Short) %&gt;%
  pivot_longer(everything(),
               names_to = "genre") %&gt;%
  group_by(genre) %&gt;%
* dplyr::tally(value)
```
]
 
.panel2-sw3-auto[

```
## # A tibble: 7 × 2
##   genre           n
##   &lt;chr&gt;       &lt;int&gt;
## 1 Action       4688
## 2 Animation    3690
## 3 Comedy      17271
## 4 Documentary  3472
## 5 Drama       21811
## 6 Romance      4744
## 7 Short        9458
```
]

&lt;style&gt;
.panel1-sw3-auto {
  color: white;
  width: 42%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-sw3-auto {
  color: white;
  width: 56%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-sw3-auto {
  color: white;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;



.right[<svg aria-hidden="true" role="img" viewBox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#ff6347;overflow:visible;position:relative;"><path d="M384 128v255.1c0 35.35-28.65 64-64 64H64c-35.35 0-64-28.65-64-64V128c0-35.35 28.65-64 64-64H320C355.3 64 384 92.65 384 128z"/></svg>]

---



---



count: false
 

.panel1-sw4-auto[

```r
*ggplot(movies_by_genre,
*      aes(x = genre,
*          y = n,
*          fill = -n))
```
]
 
.panel2-sw4-auto[
![](Slides-Week-8R_files/figure-html/sw4_auto_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 

.panel1-sw4-auto[

```r
ggplot(movies_by_genre,
       aes(x = genre,
           y = n,
           fill = -n)) +
* geom_bar(stat='identity',
*          show.legend = FALSE)
```
]
 
.panel2-sw4-auto[
![](Slides-Week-8R_files/figure-html/sw4_auto_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 

.panel1-sw4-auto[

```r
ggplot(movies_by_genre,
       aes(x = genre,
           y = n,
           fill = -n)) +
  geom_bar(stat='identity',
           show.legend = FALSE) +
* labs(title = "Count of Genre",
*      x = "Genre",
*      y = "Count")
```
]
 
.panel2-sw4-auto[
![](Slides-Week-8R_files/figure-html/sw4_auto_03_output-1.png)&lt;!-- --&gt;
]

---
count: false
 

.panel1-sw4-auto[

```r
ggplot(movies_by_genre,
       aes(x = genre,
           y = n,
           fill = -n)) +
  geom_bar(stat='identity',
           show.legend = FALSE) +
  labs(title = "Count of Genre",
       x = "Genre",
       y = "Count") +
* theme_minimal()
```
]
 
.panel2-sw4-auto[
![](Slides-Week-8R_files/figure-html/sw4_auto_04_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-sw4-auto {
  color: white;
  width: 49%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-sw4-auto {
  color: white;
  width: 49%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-sw4-auto {
  color: white;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;



---

# Back to the movies

Let's take a look at the ratings



count: false
 

.panel1-sw5-auto[

```r
*ggplot2movies::movies
```
]
 
.panel2-sw5-auto[

```
## # A tibble: 58,788 × 24
##    title     year length budget rating votes    r1    r2    r3    r4    r5    r6
##    &lt;chr&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 $         1971    121     NA    6.4   348   4.5   4.5   4.5   4.5  14.5  24.5
##  2 $1000 a…  1939     71     NA    6      20   0    14.5   4.5  24.5  14.5  14.5
##  3 $21 a D…  1941      7     NA    8.2     5   0     0     0     0     0    24.5
##  4 $40,000   1996     70     NA    8.2     6  14.5   0     0     0     0     0  
##  5 $50,000…  1975     71     NA    3.4    17  24.5   4.5   0    14.5  14.5   4.5
##  6 $pent     2000     91     NA    4.3    45   4.5   4.5   4.5  14.5  14.5  14.5
##  7 $windle   2002     93     NA    5.3   200   4.5   0     4.5   4.5  24.5  24.5
##  8 '15'      2002     25     NA    6.7    24   4.5   4.5   4.5   4.5   4.5  14.5
##  9 '38       1987     97     NA    6.6    18   4.5   4.5   4.5   0     0     0  
## 10 '49-'17   1917     61     NA    6      51   4.5   0     4.5   4.5   4.5  44.5
## # … with 58,778 more rows, and 12 more variables: r7 &lt;dbl&gt;, r8 &lt;dbl&gt;, r9 &lt;dbl&gt;,
## #   r10 &lt;dbl&gt;, mpaa &lt;chr&gt;, Action &lt;int&gt;, Animation &lt;int&gt;, Comedy &lt;int&gt;,
## #   Drama &lt;int&gt;, Documentary &lt;int&gt;, Romance &lt;int&gt;, Short &lt;int&gt;
```
]

---
count: false
 

.panel1-sw5-auto[

```r
ggplot2movies::movies %&gt;%
* ggplot(aes(x = rating))
```
]
 
.panel2-sw5-auto[
![](Slides-Week-8R_files/figure-html/sw5_auto_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 

.panel1-sw5-auto[

```r
ggplot2movies::movies %&gt;%
  ggplot(aes(x = rating)) +
* geom_histogram(aes(fill = -..count..),
*                color = "white",
*                bins = 30,
*                show.legend = FALSE)
```
]
 
.panel2-sw5-auto[
![](Slides-Week-8R_files/figure-html/sw5_auto_03_output-1.png)&lt;!-- --&gt;
]

---
count: false
 

.panel1-sw5-auto[

```r
ggplot2movies::movies %&gt;%
  ggplot(aes(x = rating)) +
  geom_histogram(aes(fill = -..count..),
                 color = "white",
                 bins = 30,
                 show.legend = FALSE) +
* theme_minimal()
```
]
 
.panel2-sw5-auto[
![](Slides-Week-8R_files/figure-html/sw5_auto_04_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-sw5-auto {
  color: white;
  width: 44.3333333333333%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-sw5-auto {
  color: white;
  width: 53.6666666666667%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-sw5-auto {
  color: white;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;



---


```r
pop &lt;- 
  ggplot2movies::movies %&gt;% 
  ggplot(aes(x = rating)) +
  geom_histogram(aes(fill = -..count..),
                 color = "white", 
                 bins = 30,
                 show.legend = FALSE) +
  theme_minimal() +
  ggtitle("Population")
```

---

# Purpose

We would like to produce a confidence interval for the population mean rating. Let's first pretend we had to take a sample of `\(n=70\)` from the `\(N= 58788\)` movies. To do this, we'll use the `sample_n` command from the `dplyr` package.


```r
set.seed(999) # Random number generator

movies_sample &lt;- 
  ggplot2movies::movies %&gt;% 
  sample_n(70)
```

---

Let's see what this looks like



count: false
 

.panel1-sw7-auto[

```r
*ggplot(movies_sample,
*      aes(x = rating))
```
]
 
.panel2-sw7-auto[
![](Slides-Week-8R_files/figure-html/sw7_auto_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 

.panel1-sw7-auto[

```r
ggplot(movies_sample,
       aes(x = rating)) +
*      geom_histogram(aes(fill = -..count..),
*                     color = "white",
*                     bins = 30,
*                     show.legend = FALSE)
```
]
 
.panel2-sw7-auto[
![](Slides-Week-8R_files/figure-html/sw7_auto_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 

.panel1-sw7-auto[

```r
ggplot(movies_sample,
       aes(x = rating)) +
       geom_histogram(aes(fill = -..count..),
                      color = "white",
                      bins = 30,
                      show.legend = FALSE) +
*      theme_minimal()
```
]
 
.panel2-sw7-auto[
![](Slides-Week-8R_files/figure-html/sw7_auto_03_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-sw7-auto {
  color: white;
  width: 53.4545454545455%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-sw7-auto {
  color: white;
  width: 44.5454545454545%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-sw7-auto {
  color: white;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;



---

# Population Estimation

--

- The histogram is an estimate of our population distribution histogram

--

To estimate a range of values, we use the mean of the sample 


```r
(movies_sample_mean &lt;- 
   movies_sample %&gt;% 
   summarize(mean = mean(rating)))
```

```
## # A tibble: 1 × 1
##    mean
##   &lt;dbl&gt;
## 1  5.81
```

.footnote[A good way to to this is to add parentheses around a variable]

--

- This is a single estimation. 

--

- Earlier you sampled from the population - aka **sampling with replacement**. 

.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

# Sampling with Replacement

To do this, we can use the `resample` command from the `mosaic` package:



count: false
 

.panel1-sw8-auto[

```r
*resample(movies_sample)
```
]
 
.panel2-sw8-auto[

]

---
count: false
 

.panel1-sw8-auto[

```r
resample(movies_sample) %&gt;%
* arrange(orig.id)
```
]
 
.panel2-sw8-auto[

```
## # A tibble: 70 × 25
##    title     year length budget rating votes    r1    r2    r3    r4    r5    r6
##    &lt;chr&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Proud R…  1958    103     NA    6.3    95   4.5   4.5   0     4.5   4.5  24.5
##  2 Heart o…  1938     83 400000    5.1    10   0    14.5   0    24.5  24.5  34.5
##  3 Heart o…  1938     83 400000    5.1    10   0    14.5   0    24.5  24.5  34.5
##  4 Twelve …  1970     94     NA    6.6   524   4.5   4.5   4.5   4.5   4.5  14.5
##  5 Polaroid  2000     96     NA    5.6    11   0    14.5   0     0     4.5   0  
##  6 Polaroid  2000     96     NA    5.6    11   0    14.5   0     0     4.5   0  
##  7 Liquida…  1965    105     NA    5.4   136   0     4.5   4.5   4.5  24.5  14.5
##  8 Liquida…  1965    105     NA    5.4   136   0     4.5   4.5   4.5  24.5  14.5
##  9 Oscar a…  1997    132     NA    6.7  1784   4.5   4.5   4.5   4.5   4.5  14.5
## 10 Wholly …  1980    103     NA    4.3   408  14.5   4.5  14.5  14.5  14.5  14.5
## # … with 60 more rows, and 13 more variables: r7 &lt;dbl&gt;, r8 &lt;dbl&gt;, r9 &lt;dbl&gt;,
## #   r10 &lt;dbl&gt;, mpaa &lt;chr&gt;, Action &lt;int&gt;, Animation &lt;int&gt;, Comedy &lt;int&gt;,
## #   Drama &lt;int&gt;, Documentary &lt;int&gt;, Romance &lt;int&gt;, Short &lt;int&gt;, orig.id &lt;chr&gt;
```
]

---
count: false
 

.panel1-sw8-auto[

```r
resample(movies_sample) %&gt;%
  arrange(orig.id) %&gt;%
* summarize(mean = mean(rating))
```
]
 
.panel2-sw8-auto[

```
## # A tibble: 1 × 1
##    mean
##   &lt;dbl&gt;
## 1  6.09
```
]

&lt;style&gt;
.panel1-sw8-auto {
  color: white;
  width: 49%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-sw8-auto {
  color: white;
  width: 49%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-sw8-auto {
  color: white;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;



---

This is only one sample mean!

---

To do a whole bunch we can run a `do` command with parentheses like so



count: false
 

.panel1-sw9-auto[

```r
*do(10)
```
]
 
.panel2-sw9-auto[

```
## An object of class "repeater"
## Slot "n":
## [1] 10
## 
## Slot "cull":
## NULL
## 
## Slot "mode":
## [1] "default"
## 
## Slot "algorithm":
## [1] 1
## 
## Slot "parallel":
## [1] TRUE
```
]

---
count: false
 

.panel1-sw9-auto[

```r
do(10) *
* (resample(movies_sample) %&gt;%
*    summarize(mean = mean(rating)))
```
]
 
.panel2-sw9-auto[

```
##        mean
## 1  5.537143
## 2  5.815714
## 3  5.804286
## 4  5.837143
## 5  5.920000
## 6  5.850000
## 7  5.628571
## 8  5.955714
## 9  5.755714
## 10 5.778571
```
]

&lt;style&gt;
.panel1-sw9-auto {
  color: white;
  width: 49%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-sw9-auto {
  color: white;
  width: 49%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-sw9-auto {
  color: white;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;



.right[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#4682b4;overflow:visible;position:relative;"><path d="M52.51 440.6l171.5-142.9V214.3L52.51 71.41C31.88 54.28 0 68.66 0 96.03v319.9C0 443.3 31.88 457.7 52.51 440.6zM308.5 440.6l192-159.1c15.25-12.87 15.25-36.37 0-49.24l-192-159.1c-20.63-17.12-52.51-2.749-52.51 24.62v319.9C256 443.3 287.9 457.7 308.5 440.6z"/></svg>]

---

But a sample of 10 is so lame. Let's think big and try 10000!

--


```r
not_lame &lt;- 
  do(10000) * summarize(resample(movies_sample), 
                        mean = mean(rating))
```

...wait a bit

---

# Estimating the population



count: false
 

.panel1-sw10-auto[

```r
*ggplot(data = not_lame ,
*      mapping = aes(x = mean))
```
]
 
.panel2-sw10-auto[
![](Slides-Week-8R_files/figure-html/sw10_auto_01_output-1.png)&lt;!-- --&gt;
]

---
count: false
 

.panel1-sw10-auto[

```r
ggplot(data = not_lame ,
       mapping = aes(x = mean)) +
* geom_histogram(aes(fill = -..count..),
*                color = "white",
*                bins = 30,
*                show.legend = FALSE)
```
]
 
.panel2-sw10-auto[
![](Slides-Week-8R_files/figure-html/sw10_auto_02_output-1.png)&lt;!-- --&gt;
]

---
count: false
 

.panel1-sw10-auto[

```r
ggplot(data = not_lame ,
       mapping = aes(x = mean)) +
  geom_histogram(aes(fill = -..count..),
                 color = "white",
                 bins = 30,
                 show.legend = FALSE) +
* theme_minimal()
```
]
 
.panel2-sw10-auto[
![](Slides-Week-8R_files/figure-html/sw10_auto_03_output-1.png)&lt;!-- --&gt;
]

&lt;style&gt;
.panel1-sw10-auto {
  color: white;
  width: 49%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-sw10-auto {
  color: white;
  width: 49%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-sw10-auto {
  color: white;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;



---


```r
samp &lt;- 
  ggplot(data = not_lame , 
       mapping = aes(x = mean)) +
  geom_histogram(aes(fill = -..count..),
                 color = "white",
                 bins = 30,
                 show.legend = FALSE) +
  theme_minimal() +
  ggtitle("Sample")
```

---

# Comparison

&lt;img src="Slides-Week-8R_files/figure-html/unnamed-chunk-43-1.png" style="display: block; margin: auto;" /&gt;

---

# Confidence using **quantiles**

 **quantiles** are

--

- cut points dividing the range of a probability distribution into continuous intervals with equal probabilities

--

- found by isolating the middle 95% of values which corresponds to a 95% confidence interval for the population mean rating

--


```r
(ci95_mean &lt;- confint(not_lame, 
                      level = 0.95, 
                      method = "quantile"))
```

```
##   name lower    upper level     method estimate
## 1 mean  5.49 6.134286  0.95 percentile 5.814286
```

--

- we can be 95% confident that the true mean rating of ALL IMDB ratings is between 5.49 and about 6.13

---

# Confidence using **standard error**

**standard error** is

--

- the standard deviation of the sampling distribution 

--

- approximated by the bootstrap distribution or the null distribution depending on the context.

--


```r
(ci95_mean &lt;- confint(not_lame, 
                      level = 0.95, 
                      method = "stderr"))
```

```
## Warning: confint: Using df = Inf.
```

```
##   name    lower    upper level method estimate margin.of.error
## 1 mean 5.488206 6.139446  0.95 stderr 5.814286         0.32562
```

--

- we can be 95% confident that the true mean rating of ALL IMDB ratings is between 5.49 and about 6.13

---

## Thats it!

&lt;center&gt;
<blockquote class="twitter-tweet" data-width="220" data-lang="en" data-dnt="true" data-theme="dark"><p lang="en" dir="ltr">Yeah I just taught pivot_longer() in a class of 100 and the reaction was just a collective &quot;OK cool whatever&quot; while I&#39;m up there like <a href="https://t.co/gLuOuzoCmf">pic.twitter.com/gLuOuzoCmf</a></p>&mdash; Allison HORRORst 👻🎃 (@allison_horst) <a href="https://twitter.com/allison_horst/status/1190001300622036992?ref_src=twsrc%5Etfw">October 31, 2019</a></blockquote>

&lt;/center&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"navigation": {
"scroll": false
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
